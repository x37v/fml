#include "defines.h"

float note_to_freq[128] = {
  8.175798915643707,//0
  8.661957218027252,//1
  9.177023997418988,//2
  9.722718241315029,//3
  10.300861153527183,//4
  10.913382232281373,//5
  11.562325709738575,//6
  12.249857374429663,//7
  12.978271799373287,//8
  13.75,//9
  14.567617547440307,//10
  15.433853164253883,//11
  16.351597831287414,//12
  17.323914436054505,//13
  18.354047994837977,//14
  19.445436482630058,//15
  20.601722307054366,//16
  21.826764464562746,//17
  23.12465141947715,//18
  24.499714748859326,//19
  25.956543598746574,//20
  27.5,//21
  29.13523509488062,//22
  30.86770632850775,//23
  32.70319566257483,//24
  34.64782887210901,//25
  36.70809598967594,//26
  38.890872965260115,//27
  41.20344461410875,//28
  43.653528929125486,//29
  46.2493028389543,//30
  48.999429497718666,//31
  51.91308719749314,//32
  55.0,//33
  58.27047018976124,//34
  61.7354126570155,//35
  65.40639132514966,//36
  69.29565774421802,//37
  73.41619197935188,//38
  77.78174593052023,//39
  82.4068892282175,//40
  87.30705785825097,//41
  92.4986056779086,//42
  97.99885899543733,//43
  103.82617439498628,//44
  110.0,//45
  116.54094037952248,//46
  123.47082531403103,//47
  130.8127826502993,//48
  138.59131548843604,//49
  146.8323839587038,//50
  155.56349186104046,//51
  164.81377845643496,//52
  174.61411571650194,//53
  184.9972113558172,//54
  195.99771799087463,//55
  207.65234878997256,//56
  220.0,//57
  233.08188075904496,//58
  246.94165062806206,//59
  261.6255653005986,//60
  277.1826309768721,//61
  293.6647679174076,//62
  311.1269837220809,//63
  329.6275569128699,//64
  349.2282314330039,//65
  369.9944227116344,//66
  391.99543598174927,//67
  415.3046975799451,//68
  440.0,//69
  466.1637615180899,//70
  493.8833012561241,//71
  523.2511306011972,//72
  554.3652619537442,//73
  587.3295358348151,//74
  622.2539674441618,//75
  659.2551138257398,//76
  698.4564628660078,//77
  739.9888454232688,//78
  783.9908719634985,//79
  830.6093951598903,//80
  880.0,//81
  932.3275230361799,//82
  987.7666025122483,//83
  1046.5022612023945,//84
  1108.7305239074883,//85
  1174.6590716696303,//86
  1244.5079348883237,//87
  1318.5102276514797,//88
  1396.9129257320155,//89
  1479.9776908465376,//90
  1567.981743926997,//91
  1661.2187903197805,//92
  1760.0,//93
  1864.6550460723597,//94
  1975.533205024496,//95
  2093.004522404789,//96
  2217.4610478149766,//97
  2349.31814333926,//98
  2489.0158697766474,//99
  2637.02045530296,//100
  2793.825851464031,//101
  2959.955381693075,//102
  3135.9634878539946,//103
  3322.437580639561,//104
  3520.0,//105
  3729.3100921447194,//106
  3951.066410048992,//107
  4186.009044809578,//108
  4434.922095629953,//109
  4698.63628667852,//110
  4978.031739553295,//111
  5274.04091060592,//112
  5587.651702928062,//113
  5919.91076338615,//114
  6271.926975707989,//115
  6644.875161279122,//116
  7040.0,//117
  7458.620184289437,//118
  7902.132820097988,//119
  8372.018089619156,//120
  8869.844191259906,//121
  9397.272573357044,//122
  9956.06347910659,//123
  10548.081821211836,//124
  11175.303405856126,//125
  11839.8215267723,//126
  12543.853951415975//127
};

float neg_note_to_freq[127] = {
  7.716926582126941,//-1
  7.283808773720153,//-2
  6.875,//-3
  6.4891358996866435,//-4
  6.124928687214831,//-5
  5.7811628548692875,//-6
  5.456691116140687,//-7
  5.150430576763592,//-8
  4.861359120657514,//-9
  4.588511998709494,//-10
  4.330978609013626,//-11
  4.0878994578218535,//-12
  3.8584632910634706,//-13
  3.6419043868600767,//-14
  3.4375,//-15
  3.2445679498433218,//-16
  3.0624643436074157,//-17
  2.8905814274346437,//-18
  2.7283455580703433,//-19
  2.575215288381796,//-20
  2.430679560328757,//-21
  2.294255999354747,//-22
  2.165489304506813,//-23
  2.0439497289109267,//-24
  1.9292316455317353,//-25
  1.8209521934300383,//-26
  1.71875,//-27
  1.62228397492166,//-28
  1.531232171803709,//-29
  1.4452907137173219,//-30
  1.364172779035171,//-31
  1.2876076441908988,//-32
  1.2153397801643786,//-33
  1.147127999677373,//-34
  1.082744652253407,//-35
  1.0219748644554634,//-36
  0.9646158227658671,//-37
  0.9104760967150198,//-38
  0.859375,//-39
  0.81114198746083,//-40
  0.7656160859018545,//-41
  0.7226453568586609,//-42
  0.6820863895175855,//-43
  0.6438038220954494,//-44
  0.6076698900821893,//-45
  0.5735639998386864,//-46
  0.5413723261267035,//-47
  0.5109874322277317,//-48
  0.48230791138293355,//-49
  0.4552380483575099,//-50
  0.4296875,//-51
  0.405570993730415,//-52
  0.38280804295092724,//-53
  0.36132267842933047,//-54
  0.34104319475879274,//-55
  0.3219019110477247,//-56
  0.30383494504109465,//-57
  0.2867819999193432,//-58
  0.27068616306335175,//-59
  0.25549371611386584,//-60
  0.24115395569146678,//-61
  0.22761902417875496,//-62
  0.21484375,//-63
  0.2027854968652075,//-64
  0.19140402147546362,//-65
  0.18066133921466523,//-66
  0.17052159737939637,//-67
  0.16095095552386235,//-68
  0.15191747252054733,//-69
  0.1433909999596716,//-70
  0.13534308153167587,//-71
  0.12774685805693292,//-72
  0.12057697784573339,//-73
  0.11380951208937748,//-74
  0.107421875,//-75
  0.10139274843260375,//-76
  0.09570201073773181,//-77
  0.09033066960733262,//-78
  0.08526079868969819,//-79
  0.08047547776193117,//-80
  0.07595873626027366,//-81
  0.0716954999798358,//-82
  0.06767154076583794,//-83
  0.06387342902846646,//-84
  0.060288488922866694,//-85
  0.05690475604468874,//-86
  0.0537109375,//-87
  0.050696374216301875,//-88
  0.047851005368865905,//-89
  0.04516533480366631,//-90
  0.04263039934484909,//-91
  0.04023773888096559,//-92
  0.03797936813013683,//-93
  0.0358477499899179,//-94
  0.03383577038291897,//-95
  0.03193671451423323,//-96
  0.030144244461433347,//-97
  0.02845237802234437,//-98
  0.02685546875,//-99
  0.025348187108150937,//-100
  0.023925502684432953,//-101
  0.022582667401833154,//-102
  0.021315199672424547,//-103
  0.020118869440482794,//-104
  0.018989684065068416,//-105
  0.01792387499495895,//-106
  0.016917885191459484,//-107
  0.015968357257116615,//-108
  0.015072122230716673,//-109
  0.014226189011172185,//-110
  0.013427734375,//-111
  0.012674093554075469,//-112
  0.011962751342216476,//-113
  0.011291333700916577,//-114
  0.010657599836212273,//-115
  0.010059434720241397,//-116
  0.009494842032534208,//-117
  0.008961937497479476,//-118
  0.008458942595729742,//-119
  0.007984178628558308,//-120
  0.007536061115358337,//-121
  0.0071130945055860925,//-122
  0.0067138671875,//-123
  0.006337046777037742,//-124
  0.00598137567110823,//-125
  0.005645666850458289,//-126
  0.005328799918106143//-127
};

namespace fm {
  //XXX do interpolation!
  float midi_note_to_freq(float midi_note) {
    int index = midi_note;
    if (index < -126)
      return neg_note_to_freq[126];
    else if (index < 0)
      return neg_note_to_freq[-(index + 1)]; //the first one is -1, not 0
    else if (index < 128)
      return note_to_freq[index];
    return note_to_freq[127];
  }
}

