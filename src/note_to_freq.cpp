#include <arm_math.h>
namespace {
  float32_t note_to_freq[255] = {
    0.005328799918106137,
    0.005645666850458289,
    0.005981375671108238,
    0.006337046777037734,
    0.0067138671875,
    0.0071130945055860925,
    0.007536061115358337,
    0.007984178628558308,
    0.008458942595729742,
    0.008961937497479476,
    0.009494842032534208,
    0.010059434720241397,
    0.010657599836212273,
    0.011291333700916577,
    0.011962751342216476,
    0.012674093554075469,
    0.013427734375,
    0.014226189011172185,
    0.015072122230716673,
    0.015968357257116615,
    0.016917885191459484,
    0.01792387499495895,
    0.018989684065068416,
    0.020118869440482794,
    0.021315199672424547,
    0.022582667401833154,
    0.023925502684432953,
    0.025348187108150937,
    0.02685546875,
    0.02845237802234437,
    0.030144244461433347,
    0.03193671451423323,
    0.03383577038291897,
    0.0358477499899179,
    0.03797936813013683,
    0.04023773888096559,
    0.04263039934484909,
    0.04516533480366631,
    0.047851005368865905,
    0.050696374216301875,
    0.0537109375,
    0.05690475604468874,
    0.060288488922866694,
    0.06387342902846646,
    0.06767154076583794,
    0.0716954999798358,
    0.07595873626027366,
    0.08047547776193117,
    0.08526079868969819,
    0.09033066960733262,
    0.09570201073773181,
    0.10139274843260375,
    0.107421875,
    0.1138095120893774,
    0.12057697784573346,
    0.12774685805693292,
    0.13534308153167582,
    0.1433909999596717,
    0.15191747252054733,
    0.16095095552386224,
    0.17052159737939646,
    0.18066133921466523,
    0.19140402147546348,
    0.2027854968652076,
    0.21484375,
    0.2276190241787548,
    0.24115395569146691,
    0.25549371611386584,
    0.27068616306335164,
    0.2867819999193434,
    0.30383494504109465,
    0.3219019110477245,
    0.3410431947587929,
    0.36132267842933047,
    0.38280804295092696,
    0.4055709937304152,
    0.4296875,
    0.4552380483575096,
    0.48230791138293383,
    0.5109874322277317,
    0.5413723261267033,
    0.5735639998386868,
    0.6076698900821893,
    0.643803822095449,
    0.6820863895175858,
    0.7226453568586609,
    0.7656160859018539,
    0.8111419874608304,
    0.859375,
    0.9104760967150192,
    0.9646158227658677,
    1.0219748644554634,
    1.0827446522534065,
    1.1471279996773736,
    1.2153397801643786,
    1.287607644190898,
    1.3641727790351716,
    1.4452907137173219,
    1.5312321718037079,
    1.6222839749216609,
    1.71875,
    1.8209521934300388,
    1.9292316455317344,
    2.0439497289109267,
    2.165489304506813,
    2.2942559993547462,
    2.430679560328757,
    2.5752152883817967,
    2.728345558070343,
    2.8905814274346437,
    3.0624643436074166,
    3.2445679498433213,
    3.4375,
    3.6419043868600776,
    3.858463291063469,
    4.0878994578218535,
    4.330978609013626,
    4.5885119987094924,
    4.861359120657514,
    5.150430576763593,
    5.456691116140686,
    5.7811628548692875,
    6.124928687214833,
    6.489135899686643,
    6.875,
    7.283808773720155,
    7.7169265821269395,
    8.175798915643707,
    8.661957218027252,
    9.177023997418987,
    9.722718241315029,
    10.300861153527185,
    10.913382232281371,
    11.562325709738575,
    12.249857374429665,
    12.978271799373285,
    13.75,
    14.56761754744031,
    15.433853164253879,
    16.351597831287414,
    17.323914436054505,
    18.354047994837973,
    19.445436482630058,
    20.60172230705437,
    21.826764464562743,
    23.12465141947715,
    24.49971474885933,
    25.95654359874657,
    27.5,
    29.13523509488062,
    30.867706328507758,
    32.70319566257483,
    34.64782887210901,
    36.70809598967595,
    38.890872965260115,
    41.20344461410874,
    43.653528929125486,
    46.2493028389543,
    48.99942949771866,
    51.91308719749314,
    55.0,
    58.27047018976124,
    61.735412657015516,
    65.40639132514966,
    69.29565774421802,
    73.4161919793519,
    77.78174593052023,
    82.40688922821748,
    87.30705785825097,
    92.4986056779086,
    97.99885899543732,
    103.82617439498628,
    110.0,
    116.54094037952248,
    123.470825314031,
    130.8127826502993,
    138.59131548843604,
    146.83238395870376,
    155.56349186104046,
    164.813778456435,
    174.61411571650194,
    184.9972113558172,
    195.99771799087466,
    207.65234878997256,
    220.0,
    233.08188075904496,
    246.941650628062,
    261.6255653005986,
    277.1826309768721,
    293.6647679174075,
    311.1269837220809,
    329.62755691287,
    349.2282314330039,
    369.9944227116344,
    391.9954359817493,
    415.3046975799451,
    440.0,
    466.1637615180898,
    493.88330125612424,
    523.2511306011972,
    554.3652619537442,
    587.3295358348153,
    622.2539674441618,
    659.2551138257397,
    698.4564628660079,
    739.9888454232688,
    783.9908719634984,
    830.6093951598904,
    880.0,
    932.3275230361796,
    987.7666025122485,
    1046.5022612023945,
    1108.7305239074883,
    1174.6590716696305,
    1244.5079348883237,
    1318.5102276514795,
    1396.9129257320158,
    1479.9776908465376,
    1567.9817439269968,
    1661.2187903197807,
    1760.0,
    1864.6550460723593,
    1975.533205024497,
    2093.004522404789,
    2217.4610478149766,
    2349.318143339261,
    2489.0158697766474,
    2637.020455302959,
    2793.8258514640315,
    2959.955381693075,
    3135.9634878539937,
    3322.4375806395615,
    3520.0,
    3729.3100921447185,
    3951.066410048994,
    4186.009044809578,
    4434.922095629953,
    4698.636286678522,
    4978.031739553295,
    5274.040910605918,
    5587.651702928063,
    5919.91076338615,
    6271.926975707987,
    6644.875161279123,
    7040.0,
    7458.6201842894425,
    7902.132820097983,
    8372.018089619156,
    8869.84419125991,
    9397.272573357039,
    9956.06347910659,
    10548.081821211843,
    11175.30340585612,
    11839.8215267723,
    12543.853951415984
  };
  arm_linear_interp_instance_f32 interp_instance = {255, -127, 1, note_to_freq};
}

namespace fm {
  float midi_note_to_freq(float midi_note) { return arm_linear_interp_f32(&interp_instance, midi_note); }
}
